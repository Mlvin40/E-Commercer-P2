<div class="card p-3">
  <h5 class="mb-3">Top {{top}} clientes con más productos en venta</h5>

  <div class="row g-2 align-items-end">
    <div class="col-md-3">
      <label class="form-label">Top</label>
      <input type="number" class="form-control" [(ngModel)]="top" min="1" />
    </div>
    <div class="col-md-2">
      <button class="btn btn-primary w-100" (click)="buscar()">Buscar</button>
    </div>
  </div>

  <div class="mt-3" *ngIf="loading">Cargando…</div>
  <div class="text-danger mt-3" *ngIf="error">{{ error }}</div>

  <table class="table mt-3" *ngIf="rows.length">
    <thead>
      <tr>
        <th>#</th>
        <th>Cliente</th>
        <th>Correo</th>
        <th class="text-end">Productos en venta</th>
        <th class="text-end">Stock total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of rows; index as i">
        <td>{{ i+1 }}</td>
        <td>{{ r.nombre }}</td>
        <td>{{ r.correo }}</td>
        <td class="text-end">{{ r.productosEnVenta | number }}</td>
        <td class="text-end">{{ r.stockTotal | number }}</td>
      </tr>
    </tbody>
  </table>

  <div class="text-muted mt-3" *ngIf="!loading && !rows.length">Sin datos.</div>
</div>
