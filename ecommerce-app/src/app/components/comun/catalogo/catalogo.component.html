<div class="d-flex gap-2 align-items-end mb-3">
  <div>
    <label class="form-label">CategorÃ­a</label>
    <select class="form-select" [(ngModel)]="categoria" (change)="buscar()">
      <option value="">Todas</option>
      <option *ngFor="let c of categorias" [value]="c">{{ c }}</option>
    </select>
  </div>
  <div class="flex-grow-1">
    <label class="form-label">BÃºsqueda</label>
    <input class="form-control" [(ngModel)]="q" (keyup.enter)="buscar()" placeholder="Nombre del producto">
  </div>
  <div class="d-flex gap-2">
    <button class="btn btn-primary" (click)="buscar()">Filtrar</button>
    <button class="btn btn-outline-secondary" (click)="clearFiltros()">Limpiar</button>
  </div>
</div>

<div *ngIf="cargando">Cargandoâ€¦</div>
<div *ngIf="error" class="text-danger">{{ error }}</div>

<div class="row g-3" *ngIf="!cargando">
  <div class="col-12 col-sm-6 col-lg-4" *ngFor="let p of items">
    <div class="card h-100">
      <img *ngIf="p.imagenUrl" [src]="p.imagenUrl" class="card-img-top" style="height:180px;object-fit:cover">
      <div class="card-body">
        <h6 class="card-title mb-1">{{ p.nombre }}</h6>

        <div class="text-muted small mb-1">
          {{ p.categoria }} Â· Stock: {{ p.stock }}
        </div>

        <div class="fw-bold mb-2">Q {{ p.precio | number:'1.2-2' }}</div>

        <div class="small text-secondary mb-2" *ngIf="p.vendedorNombre">
          por {{ p.vendedorNombre }}
          <span class="ms-1" *ngIf="p.vendedorCorreo" [title]="p.vendedorCorreo">ðŸ“§</span>
        </div>

        <button class="btn btn-sm btn-primary" (click)="addToCart(p.id)">Agregar al carrito</button>
      </div>
    </div>
  </div>
</div>

<nav class="mt-3" *ngIf="totalPages > 1">
  <ul class="pagination">
    <li class="page-item" [class.disabled]="page===0">
      <button class="page-link" (click)="load(page-1)">Â«</button>
    </li>
    <li class="page-item" *ngFor="let i of pages" [class.active]="i===page">
      <button class="page-link" (click)="load(i)">{{ i + 1 }}</button>
    </li>
    <li class="page-item" [class.disabled]="page===totalPages-1">
      <button class="page-link" (click)="load(page+1)">Â»</button>
    </li>
  </ul>
</nav>
